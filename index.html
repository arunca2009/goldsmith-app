<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Goldsmith System</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
 font-family: Arial, sans-serif;
 background:#f2f2f2;
 padding:10px;
 margin:0;
}
.box{
 background:#ffffff;
 padding:15px;
 border-radius:12px;
 max-width:520px;
 margin:auto;
}
h2{text-align:center;}
input,select,button{
 width:100%;
 padding:12px;
 margin-top:8px;
 font-size:16px;
 border-radius:8px;
 border:1px solid #ccc;
}
button{
 background:#0a7cff;
 color:white;
 border:none;
 font-size:17px;
}
.section{
 background:#f7f7f7;
 padding:10px;
 border-radius:8px;
 margin-top:12px;
}
</style>
</head>

<body>

<script>
if(prompt("Enter Password")!="1234"){
 document.body.innerHTML="ACCESS DENIED";
}
</script>

<div class="box">

<h2>Jewellery Billing System</h2>

<div class="section">
<input id="name" placeholder="Customer Name">
<input id="phone" placeholder="Phone Number">
</div>

<div class="section">
<select id="item">
<option>Ring</option>
<option>Necklace</option>
<option>Bangle</option>
<option>Chain</option>
<option>Bracelet</option>
</select>

<select id="purity">
<option>22K</option>
<option>18K</option>
</select>

<input id="weight" placeholder="New Gold Weight (g)" inputmode="decimal">
<input id="rate" placeholder="Gold Rate per gram" inputmode="decimal">
<input id="making" placeholder="Making Charge" inputmode="decimal">
<input id="stone" placeholder="Stone Charge" inputmode="decimal">
<input id="hallmark" placeholder="Hallmark Charge" inputmode="decimal">
<input id="advance" placeholder="Advance Paid" inputmode="decimal">
</div>

<div class="section">
<h3>Old Gold Exchange</h3>
<input id="oldWeight" placeholder="Old Gold Weight (g)" inputmode="decimal">
<select id="oldTouch">
<option value="0">Select Old Gold Touch</option>
<option value="91.6">22K</option>
<option value="75">18K</option>
<option value="100">24K</option>
</select>
<input id="oldRate" placeholder="Old Gold Rate per gram" inputmode="decimal">
<input id="oldWastage" placeholder="Wastage (%)" inputmode="decimal">
</div>

<button onclick="calculate()">CALCULATE</button>

<h3 id="result">Final Payable: Rs. 0</h3>
<h3 id="oldvalue">Old Gold Value: Rs. 0</h3>
<h3 id="balance">Balance: Rs. 0</h3>

<button onclick="saveOrder()">SAVE ORDER</button>
<button onclick="shareInvoice()">SHARE INVOICE</button>
<button onclick="generatePDF()">DOWNLOAD PDF</button>

</div>

<script>

/* ========= CALCULATE ========= */
function calculate(){

 let w = Number(document.getElementById("weight").value);
 let r = Number(document.getElementById("rate").value);
 let m = Number(document.getElementById("making").value);
 let s = Number(document.getElementById("stone").value);
 let h = Number(document.getElementById("hallmark").value);
 let adv = Number(document.getElementById("advance").value);

 let ow = Number(document.getElementById("oldWeight").value);
 let ot = Number(document.getElementById("oldTouch").value);
 let orate = Number(document.getElementById("oldRate").value);

 let newTotal = (w*r)+m+s+h;

 let pure = ow*(ot/100);
 let oldGoldValue = pure*orate;

 let finalAmount = newTotal-oldGoldValue;
 let bal = finalAmount-adv;

 document.getElementById("result").innerText =
 "Final Payable: Rs. "+finalAmount.toFixed(2);

 document.getElementById("oldvalue").innerText =
 "Old Gold Value: Rs. "+oldGoldValue.toFixed(2);

 document.getElementById("balance").innerText =
 "Balance: Rs. "+bal.toFixed(2);
}


/* ========= SAVE ORDER ========= */
function saveOrder(){

 let w = document.getElementById("weight").value;
 let r = document.getElementById("rate").value;
 let m = document.getElementById("making").value;
 let s = document.getElementById("stone").value;
 let h = document.getElementById("hallmark").value;
 let adv = document.getElementById("advance").value;

 let ow = document.getElementById("oldWeight").value;
 let ot = document.getElementById("oldTouch").value;
 let orate = document.getElementById("oldRate").value;

 let url =
"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"+
"?name="+document.getElementById("name").value+
"&phone="+document.getElementById("phone").value+
"&item="+document.getElementById("item").value+
"&purity="+document.getElementById("purity").value+
"&weight="+w+
"&rate="+r+
"&making="+m+
"&stone="+s+
"&hallmark="+h+
"&oldweight="+ow+
"&oldtouch="+ot+
"&oldrate="+orate+
"&final="+document.getElementById("result").innerText+
"&advance="+adv+
"&balance="+document.getElementById("balance").innerText;

 window.open(url);
 alert("Saved Successfully");
}


/* ========= SHARE ========= */
function shareInvoice(){

 let msg =
"Invoice\n"+
document.getElementById("result").innerText+"\n"+
document.getElementById("balance").innerText;

 window.open("https://wa.me/?text="+encodeURIComponent(msg));
}


/* ========= PDF ========= */
function generatePDF(){

 if(!window.jspdf){
   alert("Internet required first time for PDF");
   return;
 }

 const { jsPDF } = window.jspdf;
 const doc = new jsPDF();

 doc.text("SRI MARUTHAMALAI JEWELS WORKS",20,20);
 doc.text(document.getElementById("result").innerText,20,40);
 doc.text(document.getElementById("balance").innerText,20,50);

 doc.save("invoice.pdf");
}

</script>

</body>
</html>








